(()=>{"use strict";var t={n:a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return t.d(e,{a:e}),e},d:(a,e)=>{for(var o in e)t.o(e,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:e[o]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a)};const a=window.wp.blocks,e=JSON.parse('{"UU":"content-protector/area"}'),o=window.wp.blockEditor,n=window.wp.components,r=window.wp.data,s=window.wp.element,i=window.wp.apiFetch;var d=t.n(i);const p=window.ReactJSXRuntime,{__}=wp.i18n;(0,a.getBlockType)("content-protector/area")||(0,a.registerBlockType)(e.UU,{title:"Protected Area",edit:function({attributes:t,setAttributes:a}){const e=(0,o.useBlockProps)(),{area_id:i,headline:c,instruction:l,buttonLabel:_,placeholder:u}=t,[h,g]=(0,s.useState)(),[m,b]=(0,s.useState)(!1),[f,w]=(0,s.useState)(!1),x=(0,r.useSelect)((t=>{const{getEntityRecords:a}=t("core");return a("postType","protected_areas",{per_page:-1,order:"asc",status:"publish"})}),[]),v=t=>{switch(t){case"form":let t={background:area_data.options.form_background_color,borderRadius:area_data.options.form_border_radius};return area_data.options.form_margin&&(t.margin=area_data.options.form_margin.top+" "+area_data.options.form_margin.right+" "+area_data.options.form_margin.bottom+" "+area_data.options.form_margin.left),area_data.options.form_padding&&(t.padding=area_data.options.form_padding.top+" "+area_data.options.form_padding.right+" "+area_data.options.form_padding.bottom+" "+area_data.options.form_padding.left),t;case"headline":return{color:area_data.options.headline_font_color,fontSize:area_data.options.headline_font_size,fontWeight:area_data.options.headline_font_weight};case"instruction":return{color:area_data.options.instruction_font_color,fontSize:area_data.options.instruction_font_size,fontWeight:area_data.options.instruction_font_weight};case"button":let a={background:area_data.options.button_background_color,borderRadius:area_data.options.button_border_radius,color:area_data.options.button_font_color,fontSize:area_data.options.button_font_size,fontWeight:area_data.options.button_font_weight,textAlign:"center"};return area_data.options.button_margin&&(a.margin=area_data.options.button_margin.top+" "+area_data.options.button_margin.right+" "+area_data.options.button_margin.bottom+" "+area_data.options.button_margin.left),area_data.options.button_padding&&(a.padding=area_data.options.button_padding.top+" "+area_data.options.button_padding.right+" "+area_data.options.button_padding.bottom+" "+area_data.options.button_padding.left),a}};return(0,s.useEffect)((()=>{g(x),d()({path:"/passster/v1/meta?meta_key=passster_protection_type&post_id="+i}).then((t=>{"recaptcha"==JSON.parse(t).data?w(!0):w(!1)}))}),[x]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.InspectorControls,{children:(0,p.jsx)(n.PanelBody,{title:__("Protected Area","content-protector"),initialOpen:!0,children:x&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.SelectControl,{label:__("Select protected area","content-protector"),value:i,options:(()=>{if(!h)return[];const t=[];return t.push({label:__("No Area","content-protector"),value:0}),h.map((function(a){return a.title.raw&&""!==a.title.raw&&t.push({label:a.title.raw,value:a.id}),a})),t})(),onChange:t=>{a({area_id:t})}}),m?(0,p.jsx)(n.Button,{onClick:()=>{d()({path:"/passster/v1/areas"}).then((t=>{g(t)})),b(!1)},variant:"secondary",children:__("Get updated areas","content-protector")}):(0,p.jsx)(n.Button,{onClick:()=>{window.open(area_data.create_area_url,"_blank").focus(),b(!0)},variant:"primary",children:__("Create a new area","content-protector")})]})})}),(0,p.jsx)("div",{...(0,o.useBlockProps)(),children:(0,p.jsx)("div",{className:"passster-form",id:`ps-${i}`,style:v("form"),children:(0,p.jsxs)("div",{className:"password-form",children:[(0,p.jsx)(o.RichText,{...e,tagName:"h4",onChange:t=>{a({headline:t})},value:c,style:v("headline")}),(0,p.jsx)(o.RichText,{...e,tagName:"p",onChange:t=>{a({instruction:t})},value:l,style:v("instruction")}),!f&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.TextControl,{...e,onChange:t=>{a({placeholder:t})},value:u,id:"passster_password",className:"passster-password"}),area_data.options.show_password&&(0,p.jsxs)("label",{htmlFor:"passster-password-hint",style:{fontWeight:"400",marginBottom:"10px",display:"block"},children:[(0,p.jsx)("input",{name:"passster-password-hint",id:"passster-password-hint",type:"checkbox"}),__("Show Password","content-protector")]})]}),(0,p.jsx)(n.TextControl,{...e,onChange:t=>{a({buttonLabel:t})},value:_,className:"passster-submit",style:v("button")}),(0,p.jsx)("small",{className:"ps-preview-notice",children:__("This is just a preview. To actually unlock the content visit the post/page on your website.","content-protector")})]})})})]})},save:()=>null})})();